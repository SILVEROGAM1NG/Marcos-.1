/**
</> Original base BochilGaming 
</> Recode simple by @NeKosmic
**/

import db from"../lib/database.js";import fetch from"node-fetch";const cooldown=6e5;let handler=async(e,{conn:a})=>{try{const n=await fetch("https://random-data-api.com/api/v2/addresses"),o=await n.json(),r=db.data.users[e.sender],t=6e5-(new Date-r.lastadventure);if(r.salud<80)return e.reply(`\nRequiere al menos 80 de ❤️Salud para la aventura!!\npor favor compre ❤️Salud primero, use el comando:\n\n${Prefijo}comprar elixir <cantidad>\n\ny luego:\n\n${Prefijo}sanar <cantidad>\n`.trim());if(new Date-r.lastadventure<=6e5)return e.reply(`\n*[ ! ] Ya estuviste en una aventura, por favor espera*\n🕐${t.toTimeString()}...*\n`.trim());const i=reward(r);let d="\n\n\nFin de tu aventura 🎭\n";for(const e in i.lost)if(r[e]){const a=i.lost[e].getRandom();r[e]-=1*a,a&&(d+=`\n${global.rpg.emoticon(e)}${e}: -${a}`)}d+=`\n\n🔖 Estuviste en ${o.city}, ${pickRandom(["te quedaste dormido por un dia completo","sufriste una intoxicación por comer en un restaurante de mala calidad","fuiste asaltado","tuviste que pelear contra un dragon","perdiste tus pertenencias","fuiste atacado por una pandilla","trabajaste como agricultor todo el dia","sufriste un accidente en tu caballo","fuiste a la cárcel por una calumnia","pagaste tus impuestos","te atacó un enjambre de abejas","paso un terremoto de magnitud 10","te perdiste en un bosque cercano por 24 horas","te estafaron en una feria","un dia completo de libertinaje","perdiste en apuestas","luchaste en una batalla peligrosa","fuiste esclavizado"])}, pero tienes :`;for(const e in i.reward)if(e in r){const a=i.reward[e].getRandom();r[e]+=1*a,a&&(d+=`\n${global.rpg.emoticon(e)}${e}: ${a}`)}a.sendMessage(e.chat,{caption:`*[ AVENTURA 🌎 ]*\n\n> *País:* ${o.country}\n> *Código de pais:* ${o.country_code}\n> *Número de edificio:* ${o.building_number} ${o.secondary_address}\n> *Prefijo de ciudad:* ${o.city_prefix}\n> *Sufijo de ciudad:* ${o.city_suffix}\n> *Comunidad:* ${o.community}\n> *Ubicación:* ${o.full_address}\n> *Id:* ${o.id}\n> *Estado:* ${o.state}\n> *Dirección:* ${o.street_address}\n> *Calle:* ${o.street_name}\n> *Sufijo de calle:* ${o.street_suffix}\n> *Zona horaria:* ${o.time_zone}\n> *Código zip:* ${o.zip_code}`,footer:d.trim()||"",location:{degreesLatitude:o.latitude||43.9783056,degreesLongitude:o.longitude||15.3835139},buttons:[{buttonId:`${Prefijo}inventario`,buttonText:{displayText:"[ INVENTARIO ]"},type:1}],headerType:"LOCATION",mentions:[e.sender]}).catch((a=>{e.reply("[ ! ] No se pudo realizar una aventura")})),r.lastadventure=1*new Date}catch{e.reply("[ ! ] Fin de la aventura...")}};handler.help=["aventura"],handler.tags=["games"],handler.command=/^aventura$/i,handler.cooldown=6e5;export default handler;function reward(e={}){return{reward:{nkoins:201,exp:301,basura:101,potion:2,roca:2,madera:2,cuerda:2,ordinario:2*(e.doge&&1.2*(e.doge>2?2:e.doge)||1),singular:[0,0,0,1,0].concat(new Array(5-(e.doge>2&&e.doge<6&&e.doge||e.doge>5&&5||2)).fill(0)),mitico:[0,0,0,0,0,1,0,0,0].concat(new Array(8-(e.doge>5&&e.doge<8&&e.doge||e.doge>7&&8||3)).fill(0)),legendario:[0,0,0,0,0,0,0,1,0,0].concat(new Array(10-(e.doge>8&&e.doge||4)).fill(0)),neko:[0,1,0,0,0],centaur:[0,1,0,0,0],doge:[0,1,0,0,0],dragon:[0,1,0,0,0],esmeralda:[0,1,0,0,0],zorro:[0,1,0,0,0],griffin:[0,1,0,0,0],caballo:[0,1,0,0,0],kyubi:[0,1,0,0,0],lion:[0,1,0,0,0],mascota:[0,1,0,0,0],phonix:[0,1,0,0,0],rhinoceros:[0,1,0,0,0],robo:[0,1,0,0,0],wolf:[0,1,0,0,0],hierro:[0,0,0,1,0,0],oro:[0,0,0,0,0,1,0],diamante:[0,0,0,0,0,0,1,0].concat(new Array(5-(e.zorro<6&&e.zorro||e.zorro>5&&5||0)).fill(0))},lost:{salud:101-4*e.neko,armordurability:7*(15-e.armadura)}}}

/**
[_>] https://github.com/NeKosmic/
[_>] https://gitlab.com/NeKosmic/
**/